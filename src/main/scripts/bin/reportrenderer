#!/usr/bin/env bash
set -eu -o pipefail -o errtrace
shopt -s inherit_errexit nullglob compat"${BASH_COMPAT=42}"

BUD_HOME="$(dirname "$(dirname "${BASH_SOURCE[0]}")")/dependencies/bud"
APP_HOME="$(dirname "$(dirname "${BASH_SOURCE[0]}")")"

export BUD_HOME
export APP_HOME
source "${BUD_HOME}/lib/bud.rc"
source "${APP_HOME}/lib/report_formatter.rc"
source "${APP_HOME}/lib/env.rc"

function main() {
  local _json_object_file="${1}"
  local _json_object
  _json_object="$(jq -crM . "${_json_object_file}")"
  print_test_report "${_json_object}"
}

main "${@}"